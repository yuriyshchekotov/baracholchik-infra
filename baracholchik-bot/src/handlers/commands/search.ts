import type { BotContext } from '../../types';

const searchCommand = async (ctx: BotContext): Promise<void> => {
  if (!ctx.message || !('text' in ctx.message)) {
    await ctx.reply('–û—à–∏–±–∫–∞: —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–∫—Å—Ç');
    return;
  }

  const input = ctx.message.text.split(' ').slice(1); // —É–±–∏—Ä–∞–µ–º "/search"

  if (input.length === 0) {
    await ctx.reply('–£–∫–∞–∂–∏ –∏–º—è —Ñ–∏–ª—å—Ç—Ä–∞: /search <–∏–º—è —Ñ–∏–ª—å—Ç—Ä–∞>');
    return;
  }

  const filterName = input.join(' ');

  // TODO: –í –±—É–¥—É—â–µ–º –∑–¥–µ—Å—å –Ω—É–∂–Ω–æ:
  // 1. –ù–∞–π—Ç–∏ —Ñ–∏–ª—å—Ç—Ä –ø–æ –∏–º–µ–Ω–∏ —á–µ—Ä–µ–∑ FilterManager.
  // 2. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —ç—Ç–∏–º —Ñ–∏–ª—å—Ç—Ä–æ–º.
  // 3. –í–µ—Ä–Ω—É—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–ª–∏ —Ñ–∞–π–ª —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏.
  // –°–µ–π—á–∞—Å –ø–æ–∫–∞ –≤—ã–≤–æ–¥–∏–º –∑–∞–≥–ª—É—à–∫—É –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

  console.log(`üîç –ü–æ–∏—Å–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞: ${filterName}`);

  await ctx.reply(`üîç –ü–æ–∏—Å–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ —Ñ–∏–ª—å—Ç—Ä—É "${filterName}" –ø–æ–∫–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.`);
};

export default searchCommand; 